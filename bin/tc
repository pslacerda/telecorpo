#!/usr/bin/env python3
"""
Usage:
    tc -h | --help
    tc broker
    tc camera NAME [SERVER]
    tc screen NAME [SERVER]
    tc terminal [SERVER]

Arguments:
    NAME    Client name.
    SERVER  Server address [default: 127.0.0.1].

Options:
    -h --help           Show this help.

"""

from docopt import docopt
from sys import exit

from tc import broker, camera, screen, terminal, utils


LOGGER = utils.get_logger(__name__)

args = docopt(__doc__)
args['SERVER'] = args['SERVER'] or '127.0.0.1'

utils.banner()

if args['camera']:
    name = args['NAME'].strip()
    if not name:
        LOGGER.fatal("Ivalid name")
        exit(1)
    camera.main(name, args['SERVER'])

elif args['screen']:
    name = args['NAME'].strip()
    if not name:
        LOGGER.fatal("Invalid name")
        exit(1)
    screen.main(name, args['SERVER'])

elif args['broker']:
    broker.main()

elif args['terminal']:
    terminal.main(args['SERVER'])
